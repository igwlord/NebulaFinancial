<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test NebulaAuth Fix</title>
</head>
<body>
    <h1>Test NebulaAuth Instance</h1>
    <div id="status">Cargando...</div>

    <script src="./nebula-auth.js"></script>
    <script>
        console.log('üß™ Verificando NebulaAuth...');
        
        setTimeout(() => {
            const statusDiv = document.getElementById('status');
            
            try {
                console.log('Type of window.NebulaAuth:', typeof window.NebulaAuth);
                console.log('window.NebulaAuth:', window.NebulaAuth);
                
                if (window.NebulaAuth) {
                    console.log('addAuthListener method:', typeof window.NebulaAuth.addAuthListener);
                    console.log('loginWithGoogle method:', typeof window.NebulaAuth.loginWithGoogle);
                    
                    if (typeof window.NebulaAuth.addAuthListener === 'function') {
                        statusDiv.innerHTML = '‚úÖ NebulaAuth instance working correctly!';
                        statusDiv.style.color = 'green';
                        
                        // Test adding a listener
                        window.NebulaAuth.addAuthListener((data) => {
                            console.log('üéâ Listener works!', data);
                        });
                        
                        console.log('‚úÖ Listener added successfully');
                    } else {
                        statusDiv.innerHTML = '‚ùå addAuthListener is not a function';
                        statusDiv.style.color = 'red';
                    }
                } else {
                    statusDiv.innerHTML = '‚ùå NebulaAuth not available';
                    statusDiv.style.color = 'red';
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
                statusDiv.innerHTML = '‚ùå Error: ' + error.message;
                statusDiv.style.color = 'red';
            }
        }, 500);
    </script>
</body>
</html>
